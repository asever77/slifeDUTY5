<!doctype html>
<html lang="ko">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no, user-scalable=no">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="mobile-web-app-capable" content="yes">


	<title>삼성생명 test</title>

	<link rel="stylesheet" href="/css/ui.duty5.css">

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>


	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.js"></script>
</head>

<body>
	
	<div class="wrapper" style="max-width: 512px; margin: auto">
		<canvas id="chart-0"></canvas>
	</div>
	<div class="toolbar">
		<button onclick="togglePropagate(this)">Propagate</button>
		<button onclick="toggleSmooth(this)">Smooth</button>
		<button onclick="randomize(this)">Randomize</button>
	</div>
	<div id="chart-analyser" class="analyser"></div>


	<script>
			window.chartColors = {
			red: 'rgb(255, 99, 132)',
			orange: 'rgb(255, 159, 64)',
			yellow: 'rgb(255, 205, 86)',
			green: 'rgb(75, 192, 192)',
			blue: 'rgb(54, 162, 235)',
			purple: 'rgb(153, 102, 255)',
			grey: 'rgb(201, 203, 207)'
		};

		(function(global) {
			var MONTHS = [
				'January',
				'February',
				'March',
				'April',
				'May',
				'June',
				'July',
				'August',
				'September',
				'October',
				'November',
				'December'
			];

			var COLORS = [
				'#4dc9f6',
				'#f67019',
				'#f53794',
				'#537bc4',
				'#acc236',
				'#166a8f',
				'#00a950',
				'#58595b',
				'#8549ba'
			];

			var Duty5 = global.Duty5 || (global.Duty5 = {});
			var Color = global.Color;

			Duty5.utils = {
				// Adapted from http://indiegamr.com/generate-repeatable-random-numbers-in-js/
				srand: function(seed) {
					this._seed = seed;
				},

				rand: function(min, max) {
					var seed = this._seed;
					min = min === undefined ? 0 : min;
					max = max === undefined ? 1 : max;
					this._seed = (seed * 9301 + 49297) % 233280;
					return min + (this._seed / 233280) * (max - min);
				},

				numbers: function(config) {
					var cfg = config || {};
					var min = cfg.min || 0;
					var max = cfg.max || 1;
					var from = cfg.from || [];
					var count = cfg.count || 8;
					var decimals = cfg.decimals || 8;
					var continuity = cfg.continuity || 1;
					var dfactor = Math.pow(10, decimals) || 0;
					var data = [];
					var i, value;

					for (i = 0; i < count; ++i) {
						value = (from[i] || 0) + this.rand(min, max);
						if (this.rand() <= continuity) {
							data.push(Math.round(dfactor * value) / dfactor);
						} else {
							data.push(null);
						}
					}

					return data;
				},

				labels: function(config) {
					var cfg = config || {};
					var min = cfg.min || 0;
					var max = cfg.max || 100;
					var count = cfg.count || 8;
					var step = (max - min) / count;
					var decimals = cfg.decimals || 8;
					var dfactor = Math.pow(10, decimals) || 0;
					var prefix = cfg.prefix || '';
					var values = [];
					var i;

					for (i = min; i < max; i += step) {
						values.push(prefix + Math.round(dfactor * i) / dfactor);
					}

					return values;
				},

				months: function(config) {
					var cfg = config || {};
					var count = cfg.count || 12;
					var section = cfg.section;
					var values = [];
					var i, value;

					for (i = 0; i < count; ++i) {
						value = MONTHS[Math.ceil(i) % 12];
						values.push(value.substring(0, section));
					}

					return values;
				},

				color: function(index) {
					return COLORS[index % COLORS.length];
				},

				transparentize: function(color, opacity) {
					var alpha = opacity === undefined ? 0.5 : 1 - opacity;
					return Color(color).alpha(alpha).rgbString();
				}
			};

			// DEPRECATED
			window.randomScalingFactor = function() {
				return Math.round(Duty5.utils.rand(-100, 100));
			};

			// INITIALIZATION

			Duty5.utils.srand(Date.now());

			// Google Analytics
			/* eslint-disable */
			if (document.location.hostname.match(/^(www\.)?chartjs\.org$/)) {
				(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
				(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
				m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
				})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
				ga('create', 'UA-28909194-3', 'auto');
				ga('send', 'pageview');
			}
			/* eslint-enable */

		}(this));

		;(function($, win, doc, undefined) {
			$(doc).ready(function(){
				console.log('page ready after')

				var presets = window.chartColors;
				var utils = Duty5.utils;
				var inputs = {
					min: 8,
					max: 16,
					count: 8,
					decimals: 2,
					continuity: 1
				};

				function generateData() {
					// radar chart doesn't support stacked values, let's do it manually
					var values = utils.numbers(inputs);
					inputs.from = values;
					return values;
				}

				function generateLabels() {
					return utils.months({count: inputs.count});
				}

				utils.srand(42); 

				var data = {
					labels: generateLabels(),
					datasets: [{
						backgroundColor: utils.transparentize(presets.red),
						borderColor: presets.red,
						data: generateData(),
						label: '가이드라인'
					}, {
						backgroundColor: utils.transparentize(presets.orange),
						borderColor: presets.orange,
						data: generateData(),
						hidden: true,
						label: '회사평균',
						fill: '-1'
					}, {
						backgroundColor: utils.transparentize(presets.yellow),
						borderColor: presets.yellow,
						data: generateData(),
						label: '임직원본인',
						fill: 1
					}]
				};

				var options = {
					maintainAspectRatio: true,
					spanGaps: false,
					elements: {
						line: {
							tension: 0.000001
						}
					},
					plugins: {
						filler: {
							propagate: false
						},
						'samples-filler-analyser': {
							target: 'chart-analyser'
						}
					}
				};

				var chart = new Chart('chart-0', {
					type: 'radar',
					data: data,
					options: options
				});

				// eslint-disable-next-line no-unused-vars
				function togglePropagate(btn) {
					var value = btn.classList.toggle('btn-on');
					chart.options.plugins.filler.propagate = value;
					chart.update();
				}

				// eslint-disable-next-line no-unused-vars
				function toggleSmooth(btn) {
					var value = btn.classList.toggle('btn-on');
					chart.options.elements.line.tension = value ? 0.4 : 0.000001;
					chart.update();
				}

				// eslint-disable-next-line no-unused-vars
				function randomize() {
					inputs.from = [];
					chart.data.datasets.forEach(function(dataset) {
						dataset.data = generateData();
					});
					chart.update();
				}
			});
		})(jQuery, window, document);
	</script>

</body>
</html>
